<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>parent_child_spec (odoc.parent_child_spec)</title><link rel="stylesheet" href="odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="index.html">odoc</a> &#x00BB; parent_child_spec</nav><header class="odoc-preamble"><h2 id="parent/child-specification"><a href="#parent/child-specification" class="anchor"></a>Parent/child specification</h2><p>This parent/child specification allows more flexible output support, for example, per library documentation. See <a href="https://docs.ocaml.org">docs.ocaml.org</a>.</p><p>The rules are;</p><ul><li>Mld files may or may not have a parent mld.</li><li>Compilation units must have a parent mld.</li><li>The parent mld file must be compiled before any of its children, and the children must be specified at compilation time of the parent</li><li>The output paths of mlds and compilation units are subdirectories of their parent's output directory.</li><li>The output directory of an mld file <code>x</code> with children is <code>&lt;parent_output_directory&gt;/x</code>, and its file name is <code>index.html</code>. That is to say, <code>&lt;parent_output_directory&gt;/x/index.html</code></li><li>The output directory of an mld file <code>x</code> without children is <code>&lt;parent_output_directory&gt; /x.html</code></li><li>The output directory of a compilation unit <code>X</code> is <code>&lt;parent_output_directory&gt;/X/index.html</code></li></ul><p><b>Note:</b> The <code>--pkg &lt;package&gt;</code> option is still being supported for backward compatibility in <code>odoc &gt;= v2.0.0</code>, though it's now equivalent to specifying a parent mld file.</p><p>For example, let's consider <code>John</code> whose is a father to <code>Doe</code> and <code>Mark</code>. <code>Doe</code> has children <code>Max</code>, and page <code>foo</code>, whereas <code>Mark</code> has no child. That is to say, <code>john.mld</code>, <code>doe.mld</code>, <code>mark.mld</code>, <code>max.mld</code>, <code>foo.ml</code> respectively. For instance;</p><p><code>john.mld</code></p><pre><code>{0 About John}

I'm John the father to {{!page-doe}Doe} and {{!page-mark}Mark}.</code></pre><p><code>doe.mld</code></p><pre><code>{0 About Doe}

I'm Doe, the;
- son to {{!page-john}John}
- brother to {{!page-mark}Mark}
- father to {{!page-max}Max}

I also own page {{!page-foo}foo}</code></pre><p><code>mark.mld</code></p><pre><code>{0 About Mark}

I'm Mark {{!page-doe}Doe}'s and I have no child.</code></pre><p><code>max.mld</code></p><pre><code>{0 About Max}

I'm Max, the child to {{!page-doe}Doe}</code></pre><p><code>foo.ml</code></p><pre><code>(** I'm foo, a page child to Doe*)</code></pre></header><nav class="odoc-toc"><ul><li><a href="#compilation">compilation</a></li><li><a href="#linking">linking</a></li><li><a href="#generate-html">generate html</a></li></ul></nav><div class="odoc-content"><h3 id="compilation"><a href="#compilation" class="anchor"></a>compilation</h3><pre><code>$ ocamlc -c -bin-annot foo.ml
&amp;&amp; odoc compile john.mld -c page-doe -c page-mark
&amp;&amp; odoc compile doe.mld -I . --parent page-john -c page-max -c foo
&amp;&amp; odoc compile max.mld -I . --parent page-doe
&amp;&amp; odoc compile foo.cmt -I . --parent page-doe
&amp;&amp; odoc compile mark.mld -I . --parent page-john</code></pre><p>The output of the compilation phase will be <code>odoc</code> files, where each of them will be linked by invoking <code>odoc link</code> command on them.</p><h3 id="linking"><a href="#linking" class="anchor"></a>linking</h3><p><code>odoc link -I . &lt;file&gt;.odoc</code></p><pre><code>$ odoc link -I . page-john.odoc
&amp;&amp; odoc link -I . page-doe.odoc
&amp;&amp; odoc link -I . page-mark.odoc
&amp;&amp; odoc link -I . page-max.odoc
&amp;&amp; odoc link -I . foo.odoc</code></pre><p>The output of the <code>odoc link</code> command is an <code>odocl</code> file, by default, in the same path as the original <code>odoc</code> file.</p><h3 id="generate-html"><a href="#generate-html" class="anchor"></a>generate html</h3><pre><code>$ odoc html-generate --indent -o html page-john.odocl
&amp;&amp; odoc html-generate --indent -o html page-doe.odocl
&amp;&amp; odoc html-generate --indent -o html page-mark.odocl
&amp;&amp; odoc html-generate --indent -o html page-max.odocl
&amp;&amp; odoc html-generate --indent -o html foo.odocl
&amp;&amp; odoc support-files -o html</code></pre><p>We then inspect the contents of <code>html</code> directory using;</p><p><code>ls -R html</code></p><pre><code>highlight.pack.js
john
odoc.css

html/john:
doe
index.html
mark.html

html/john/doe:
Foo
index.html
max.html

html/john/doe/Foo:
index.</code></pre><p><b>Note:</b> We generated html files only for this example, but it's very possible to generate files in other formats, i.e latex and man-pages; using:</p><ul><li><code>$ odoc latex-generate -o latex &lt;file&gt;.odocl</code></li><li><code>$ odoc man-generate -o man &lt;file&gt;.odocl</code></li></ul><p>There are of course other commands that <code>odoc</code> uses for other purposes; for example, for inspection;</p><ul><li><code>odoc &lt;html/latex/man&gt;-targets ...</code> to take a glimpse of the expected targets</li><li><code>odoc compile-deps ...</code> which lists units \(with their digest\) which need to be compiled in order to compile current compilation unit. The unit itself and its digest is also reported in the output.</li></ul><p>For example, inspecting the dependencies required to compile <code>foo.cmt</code>, we run</p><p><code>odoc compile-deps foo.cmt</code></p><p>and we shall get</p><pre><code>Stdlib aea3513d44d604b62eaff79ad12007b3
Foo 5ab79b5411a3c3476029260eda0b4a26
CamlinternalFormatBasics f562e7b79dbe1bb1591060d6b4e854cf</code></pre><p>For more about <code>odoc</code> commands, simply invoke <code>odoc --help</code> in your shell.</p></div></body></html>